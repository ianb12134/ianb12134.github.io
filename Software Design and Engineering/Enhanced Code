def commands():
    print('This is the Murder Mystery Game')
    print('Collect 6 pieces of evidence and confront Mike to make the arrest')
    print('If you confront Mike before you get all 6 pieces of evidence Mike will go free')
    print('Move commands are: North, South, East, West')
    print('Add to Inventory: grab')
    print('To view the map: map')
    print('To exit game at any point enter "Exit"')

def intro():
    print('You are a senior detective sent to solve the murder of Mr. Smith')
    print('You are informed that the relationship between Mr. Smith and Mike has become strained.')
    print('You must search the mansion and find enough evidence to arrest the killer')

def show_map():
    print('''
        Map of the Mansion:
                    [Office] --- [Kitchen]
                        |
                        |         [Bathroom]
                        |             |
        [Foyer] --- [Lounge] --- [Bedroom]
                        |
                    [Foyer]
                        |
                    [Library] --- [Game Room] --- [Observatory]
    ''')

def game():
    rooms = {
        'Foyer': {'name': 'Foyer', 'East': 'Lounge', 'text': 'You are in the Foyer.', 'item': "Mr. Smith's body"},
        'Lounge': {'name': 'Lounge', 'West': 'Foyer', 'East': 'Bedroom', 'South': 'Library', 'North': 'Office',
                   'text': 'You are in the lounge.', 'item': 'Conspiracy letter to sell the company'},
        'Bedroom': {'name': 'Bedroom', 'West': 'Lounge', 'North': 'Bathroom', 'text': 'You are in the Bedroom.',
                    'item': 'Broken safe with missing deeds'},
        'Bathroom': {'name': 'Bathroom', 'South': 'Bedroom', 'text': 'You are in the Bathroom', 'item': 'Bloody sink'},
        'Library': {'name': 'Library', 'North': 'Lounge', 'East': 'Game Room', 'text': 'You are in the Library', 'item': 'Staged suicide note'},
        'Game Room': {'name': 'Game Room', 'West': 'Library', 'East': 'Observatory', 'text': 'You are in the Game Room.', 'item': 'Bloody bat(murder weapon)'},
        'Observatory': {'name': 'Observatory', 'West': 'Game Room', 'text': 'You are in the Observatory.'},
        'Office': {'name': 'Office', 'South': 'Lounge', 'East': 'Kitchen', 'text': 'You are in the Office.', 'item': 'Security camera footage of an argument between Mike and Mr. Smith'},
        'Kitchen': {'name': 'Kitchen', 'West': 'Office', 'text': 'You are in the Kitchen', 'boss': 'Mike'},
        'Exit': {'name': 'Exit'}
    }

    directions = ['North', 'South', 'East', 'West', 'Exit']
    current_room = rooms['Foyer']
    inventory = []

    while True:
        print(current_room['text'])
        if 'item' in current_room:
            print(f'You see {current_room["item"]} for evidence.')
        else:
            print('You see no evidence in this room.')

        command = input('What do you want to do next? ').capitalize()

        if command in directions:
            if command in current_room:
                current_room = rooms[current_room[command]]
            else:
                print('You cannot go that way.')

        elif command == 'Grab':
            if 'item' in current_room:
                inventory.append(current_room['item'])
                print(f'You have added {current_room["item"]} to your inventory.')
                del current_room['item']
            else:
                print('There is no evidence to grab in this room.')

        elif command == 'Exit':
            user_input = input('Are you sure you want to quit? (yes or no): ').lower()
            if user_input == 'yes':
                print('Thanks for playing.')
                break
            elif user_input == 'no':
                print('Returning you to the game.')
            else:
                print('Invalid input.')

        elif command == 'Help':
            commands()

        elif command == 'Map':
            show_map()

        else:
            print('Invalid input.')

        if current_room == rooms['Kitchen']:
            if len(inventory) == 6:
                print('You confronted Mike with enough evidence.')
                print('You have successfully made the arrest!')
                print('Thanks for playing.')
                break
            else:
                print('You let Mike get away with the murder!')
                print('Better luck next time.')
                print('GAME OVER')
                break


commands()
start = input('Are you ready to start? (yes or no): ').lower()
if start == 'yes':
    intro()
    start = input('Are you ready to solve the murder of Mr. Smith? (yes or no): ').lower()
    if start == 'yes':
        game()
    elif start == 'no':
        commands()
    else:
        print('Invalid input.')
        commands()
elif start == 'no':
    commands()
else:
    print('Invalid input.')
    commands()

replay = input('Do you want to play again? (yes or no): ').lower()
if replay == 'yes':
    game()
else:
    print('See you for the next unsolved mystery!')
